#!/bin/bash

# Source the shared bash script
. "$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/../lib/shared.bash"

plugin_log "Custom Checkout"

# Parse plugin configuration
parse_plugin_config

plugin_log "Custom checkout configured:"
plugin_log "Repository: ${CUSTOM_REPO}"
plugin_log "Branch: ${CUSTOM_BRANCH}"
plugin_log "Commit: ${CUSTOM_COMMIT}"
plugin_log "Checkout path: ${CUSTOM_PATH}"

# Ensure the checkout path exists
mkdir -p "$CUSTOM_PATH"
cd "$CUSTOM_PATH"

# Perform the checkout
git_checkout

# Set Buildkite environment variables
set_buildkite_env

# Print checkout information
print_checkout_info
